{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["google","map","FormPlace","props","useState","text","setText","history","useHistory","onSubmit","e","preventDefault","push","path","type","onChange","target","value","FormOAndD","origin","setOrigin","destination","setDestination","place","initialConfig","zoom","center","lat","lng","Home","Form","region","setRegion","Legs","plan","legs","l","i","length","cmp","arrivalTime","name","duration","Plan","setPlan","setLegs","mapContainerRef","useRef","location","useLocation","regionName","state","originName","destinationName","useEffect","a","loader","Loader","apiKey","version","libraries","load","then","maps","Map","current","service","places","PlacesService","request","query","fields","Promise","resolve","findPlaceFromQuery","results","status","PlacesServiceStatus","OK","LatLng","geometry","radius","textSearch","console","log","directionsService","DirectionsService","waypts","formatted_address","stopover","slice","route","waypoints","optimizeWaypoints","travelMode","TravelMode","DRIVING","response","catch","window","alert","direction","routes","points","getPoints","getPlan","legs2","Marker","position","label","String","setCenter","ref","style","height","waypoint_order","start_location","end_location","unshift","sum","p","gotLunch","stayingTime","findPlace","lunchPlace","drivingDirection","nowToLunch","leg1","lunchToNext","leg2","spot","getTimeStr","locationBias","h","Math","floor","m","Place","OriginAndDestination","Result","setGoogle","useGoogle","setMap","useMap","setPlaces","usePlace","setDirection","directionsRenderer","DirectionsRenderer","suppressPolylines","setDirections","useDirection","App","to","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.857c6863.chunk.js","sourcesContent":["import { useState, useRef, useEffect } from 'react'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  useHistory,\n  useLocation,\n} from \"react-router-dom\";\n\nimport { Loader } from \"@googlemaps/js-api-loader\"\n\n\n\nfunction App() {\n  return (\n    <Router>\n      <div>\n        <nav>\n          <ul>\n            <li>\n              <Link to=\"/\">Home</Link>\n            </li>\n            <li>\n              <Link to=\"/place\">Place</Link>\n            </li>\n            <li>\n              <Link to=\"/origin-and-destination\">OriginAndDestination</Link>\n            </li>\n            <li>\n              <Link to=\"/plan\">Plan</Link>\n            </li>\n          </ul>\n        </nav>\n        <Switch>\n          <Route path=\"/place\">\n            <Place />\n          </Route>\n          <Route path=\"/origin-and-destination\">\n            <OriginAndDestination />\n          </Route>\n          <Route path=\"/result\">\n            <Result />\n          </Route>\n          <Route path=\"/plan\">\n            <Plan />\n          </Route>\n          <Route path=\"/\">\n            <Home />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nconst FormPlace = (props) => {\n  const [text, setText] = useState('');\n  const history = useHistory();\n  const handleChange = (e) => {\n    setText(e.target.value);\n  }\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    history.push(props.path, {text: text});\n  }\n\n  return(\n    <form onSubmit={handleSubmit}>\n      <p>{text}</p>\n      <input type='text' onChange={handleChange}/>\n      <input type='submit' />\n    </form>\n  )\n}\n\nconst FormOAndD = (props) => {\n  const [origin, setOrigin] = useState('');\n  const [destination, setDestination] = useState('');\n  const history = useHistory();\n  const handleChangeOrigin = (e) => {\n    setOrigin(e.target.value);\n  }\n  const handleChangeDestination = (e) => {\n    setDestination(e.target.value);\n  }\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    history.push(props.path, {place: props.place, origin: origin, destination: destination});\n  }\n\n  return(\n    <form onSubmit={handleSubmit}>\n      <div><p>Origin: {origin}</p>\n      <input type='text' onChange={handleChangeOrigin}/>\n      </div>\n      <div><p>Destination: {destination}</p>\n      <input type='text' onChange={handleChangeDestination}/>\n      </div>\n      <input type='submit' />\n    </form>\n  )\n}\n\nconst API_KEY = \"AIzaSyCkNip5D4glIDSddF__OlVzY1ovG5yVf7g\";\nconst initialConfig = {\n  zoom: 12,\n  center: { lat: 35.6432027, lng: 139.6729435 }\n}\n\nvar google, map;\n\nfunction Home() {\n  return(\n    <>\n      <h2>Home</h2>\n      <Form path='/plan'/>\n    </>\n  );\n}\n\nconst Form = (props) =>{\n  const [region, setRegion] = useState('大阪');\n  const [origin, setOrigin] = useState('大阪駅');\n  const [destination, setDestination] = useState('萱嶋駅');\n  const history = useHistory();\n  const handleChangeOrigin = (e) => {\n    setOrigin(e.target.value);\n  }\n  const handleChangeDestination = (e) => {\n    setDestination(e.target.value);\n  }\n  const handleChangeRegion = (e) => {\n    setRegion(e.target.value);\n  }\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    history.push(props.path, {region: region, origin: origin, destination: destination});\n  }\n\n  return(\n    <form onSubmit={handleSubmit}>\n      <div><p>Region: {region}</p>\n      <input type='text' onChange={handleChangeRegion} />\n      </div>\n      <div><p>Origin: {origin}</p>\n      <input type='text' onChange={handleChangeOrigin} />\n      </div>\n      <div><p>Destination: {destination}</p>\n      <input type='text' onChange={handleChangeDestination} />\n      </div>\n      <input type='submit' />\n    </form>\n  )\n}\n\nconst Legs = (props) => {\n  if(props.plan == null || props.legs == null) return(null);\n  var {plan, legs} = props;\n  var l = [];\n  for(var i = 0; i < plan.length; i++){\n    var cmp = (<li>\n                 <p>{plan[i].arrivalTime.text}, {plan[i].name}</p>\n                 <p>stay time: 30min</p>\n                 {i < legs.length ? <p>{legs[i].duration.text}</p> : null}\n              </li>);\n    l.push(cmp)\n  }\n  return(\n    <>\n      <ul>{l}</ul>\n    </>\n  )\n}\n\nfunction Plan(){\n  const [plan, setPlan] = useState(null);\n  const [legs, setLegs] = useState(null);\n  const mapContainerRef = useRef(null);\n  const location = useLocation();\n  var regionName = location.state.region, originName = location.state.origin, destinationName = location.state.destination;\n  useEffect(async () => {\n    const loader = new Loader({\n      apiKey: \"AIzaSyCkNip5D4glIDSddF__OlVzY1ovG5yVf7g\",\n      version: \"weekly\",\n      libraries: [\"places\"],\n    });\n    google = await loader.load().then((google) => {\n      return google;\n    })\n\n    map = new google.maps.Map(mapContainerRef.current, initialConfig);\n\n    var service = new google.maps.places.PlacesService(map);\n    var request = {\n      query: regionName,\n      fields: ['name', 'geometry'],\n    };\n    var region = await new Promise(resolve => {\n      service.findPlaceFromQuery(request, function(results, status) {\n        if (status === google.maps.places.PlacesServiceStatus.OK) {\n          resolve(results);\n        }\n      });\n    });\n\n    request = {\n      location: new google.maps.LatLng(region[0].geometry.location.lat(), region[0].geometry.location.lng()),\n      radius: '5000',\n      query: '観光',\n    }\n    var places = await new Promise(resolve => {\n      service.textSearch(request, (results, status) => {\n        if (status == google.maps.places.PlacesServiceStatus.OK) {\n          resolve(results);\n        }\n      })\n    })\n    console.log(places);\n\n    const directionsService = new google.maps.DirectionsService();\n    // const directionsRenderer = new google.maps.DirectionsRenderer({suppressPolylines: true});\n    // directionsRenderer.setMap(map);\n    var waypts = places.map(place => {\n      return {\n        location: place.formatted_address,\n        stopover: true,\n      }\n    });\n    waypts = waypts.slice(0, 5)\n\n    var direction = await directionsService\n      .route({\n        origin: originName,\n        destination: destinationName,\n        waypoints: waypts,\n        optimizeWaypoints: true,\n        travelMode: google.maps.TravelMode.DRIVING,\n      })\n      .then((response) => {\n        // directionsRenderer.setDirections(response);\n        return response;\n      })\n      .catch((e) => window.alert(\"Directions request failed due to \" + e));\n\n    console.log(direction);\n\n    var legs = direction.routes[0].legs;\n    var points = getPoints(direction, places);\n    console.log(legs);\n    console.log(points);\n    var [plan, legs2] = await getPlan(points, legs);\n    console.log(plan);\n    console.log(legs2);\n    for(var i = 0; i < plan.length; i++){\n      new google.maps.Marker({\n        position: {\n          lat: plan[i].geometry.location.lat(),\n          lng: plan[i].geometry.location.lng(),\n        },\n        label: String(i),\n        map: map,\n      });\n    }\n    map.setCenter({lat: plan[0].geometry.location.lat(), lng: plan[0].geometry.location.lng()});\n    setPlan(plan);\n    setLegs(legs2);\n  }, []);\n\n  return(\n    <>\n      <Legs plan={plan} legs={legs}/>\n      <div ref={mapContainerRef} style={{height: \"100vh\"}}>I can use the DOM with react ref</div>\n    </>\n  )\n}\n\nconst getPoints = (direction, places) => {\n  var waypts = places.slice(0, 5);\n  var points = direction.routes[0].waypoint_order.map(i => waypts[i]);\n  var origin = {\n    name: direction.request.origin.query,\n    geometry: {\n      location: direction.routes[0].legs[0].start_location,\n    }\n  };\n  var destination = {\n    name: direction.request.destination.query,\n    geometry: {\n      location: direction.routes[0].legs.slice(-1)[0].end_location,\n    }\n  };\n  points.unshift(origin);\n  points.push(destination);\n  return points;\n}\n\nconst getPlan = async (points, legs) => {\n  var sum = 9 * 3600;\n  var p = [], l = [];\n  var gotLunch = false;\n  for(var i = 0; i < points.length; i++){\n    p.push(points[i]);\n    var stayingTime = 3600;\n    sum += stayingTime;\n    if(sum >= 12 * 3600 && gotLunch == false){\n      var [lunchPlace] = await findPlace('昼食', points[i].geometry.location);\n      console.log(lunchPlace);\n      var nowToLunch = await drivingDirection(points[i].formatted_address, lunchPlace.formatted_address);\n      var leg1 = nowToLunch.routes[0].legs[0];\n      var lunchToNext = await drivingDirection(lunchPlace.formatted_address, points[i+1].formatted_address);\n      var leg2 = lunchToNext.routes[0].legs[0];\n      p.push(lunchPlace);\n      l.push(leg1);\n      l.push(leg2);\n      sum += leg1.duration.value + leg2.duration.value;\n      gotLunch = true;\n    }\n    else{\n      if(i < legs.length){\n        sum += legs[i].duration.value;\n        l.push(legs[i]);\n      }\n    }\n  }\n  var plan = [];\n  sum = 9 * 3600;\n  for(var i = 0; i < p.length; i++){\n    var stayingTime = 3600;\n    var spot = {\n      name: p[i].name,\n      formatted_address: p[i].formatted_address,\n      geometry: p[i].geometry,\n      arrivalTime: {\n        text: getTimeStr(sum),\n        value: sum,\n      },\n      stayingTime,\n    }\n    plan.push(spot);\n    if(i < l.length){\n      sum += stayingTime + l[i].duration.value;\n    }\n  }\n  return [plan, l];\n}\n\nconst findPlace = async (query, location) => {\n  var service = new google.maps.places.PlacesService(map);\n  var request = {\n    query: query,\n    fields: ['name', 'geometry', 'formatted_address'],\n    locationBias: {lat: location.lat(), lng: location.lng()},\n  };\n  var place = await new Promise(resolve => {\n    service.findPlaceFromQuery(request, function(results, status) {\n      if (status === google.maps.places.PlacesServiceStatus.OK) {\n        resolve(results);\n      }\n    });\n  });\n  return place;\n}\n\nconst drivingDirection = async (origin, destination) => {\n  const directionsService = new google.maps.DirectionsService();\n  // const directionsRenderer = new google.maps.DirectionsRenderer({suppressPolylines: true});\n  // directionsRenderer.setMap(map);\n  var direction = await directionsService\n    .route({\n      origin: origin,\n      destination: destination,\n      travelMode: google.maps.TravelMode.DRIVING,\n    })\n    .then((response) => {\n      // directionsRenderer.setDirections(response);\n      return response;\n    })\n    .catch((e) => console.log(\"Directions request failed due to \" + e));\n  return direction\n}\n\n\nfunction getTimeStr(sum){\n  var h = Math.floor(sum / 3600);\n  var m = Math.floor((sum % 3600) / 60);\n  return `${('00' + h).slice(-2)}:${('00' + m).slice(-2)}`;\n}\n\nfunction Place() {\n  return(\n    <>\n      <h2>Place</h2>\n      <FormPlace path='/origin-and-destination'/>\n    </>\n  );\n}\n\nfunction OriginAndDestination() {\n  const location = useLocation();\n  return(\n    <>\n      <h2>OriginAndDestination</h2>\n      <p>{location.state.text}</p>\n      <FormOAndD path='/result' place={location.state.text}/>\n    </>\n  );\n}\n\nconst useGoogle = (apiKey) => {\n  const [google, setGoogle] = useState(null);\n  const loader = new Loader({\n    apiKey: \"AIzaSyCkNip5D4glIDSddF__OlVzY1ovG5yVf7g\",\n    version: \"weekly\",\n    libraries: [\"places\"],\n  });\n  useEffect(() => {\n    loader.load().then((google) => {\n      setGoogle(google)\n    })\n  }, []) // useEffectの第二引数を[]にすることで、初回1回目だけ実行される\n  return google\n}\n\nconst useMap = ({ google, mapContainerRef, initialConfig }) => {\n  const [map, setMap] = useState(null)\n  useEffect(() => {\n    // googleMapかmapContainerRefが初期化されてなければ何もしない\n    if (!google || !mapContainerRef.current) {\n      return\n    }\n    const map = new google.maps.Map(mapContainerRef.current, initialConfig)\n    setMap(map)\n  }, [google, mapContainerRef])\n  return map\n}\n\n\nconst useDirection = ({ google, map, origin, destination, places }) => {\n  const [direction, setDirection] = useState(null);\n  useEffect(() => {\n    if (!google || !map || !places) {\n      return\n    }\n    const directionsService = new google.maps.DirectionsService();\n    const directionsRenderer = new google.maps.DirectionsRenderer({suppressPolylines: true});\n\n    directionsRenderer.setMap(map);\n    var waypts = places.map(place => {\n      return {\n        location: place.formatted_address,\n        stopover: true,\n      }\n    });\n    waypts = waypts.slice(0, 5)\n\n    directionsService\n      .route({\n        origin: origin,\n        destination: destination,\n        waypoints: waypts,\n        optimizeWaypoints: true,\n        travelMode: google.maps.TravelMode.DRIVING,\n      })\n      .then((response) => {\n        directionsRenderer.setDirections(response);\n        console.log(response)\n        setDirection(response);\n      })\n      .catch((e) => window.alert(\"Directions request failed due to \" + e));\n  }, [google, map, places])\n  return direction;\n}\n\nconst usePlace = ({ google, map, place }) =>{\n  const [places, setPlaces] = useState(null);\n  useEffect(() => {\n    if (!google || !map) {\n      return\n    }\n    var service = new google.maps.places.PlacesService(map);\n    var request = {\n      query: place,\n      fields: ['name', 'geometry'],\n    };\n    service.findPlaceFromQuery(request, function(results, status) {\n      if (status === google.maps.places.PlacesServiceStatus.OK) {\n        var request = {\n          location: new google.maps.LatLng(results[0].geometry.location.lat(), results[0].geometry.location.lng()),\n          radius: '5000',\n          query: '観光',\n        }\n        service.textSearch(request, (results, status) => {\n          if (status == google.maps.places.PlacesServiceStatus.OK) {\n            console.log(results);\n            setPlaces(results);\n          }\n        });\n      }\n    });\n  }, [google, map])\n  return places\n}\n\n\nfunction Result() {\n  const location = useLocation();\n  const google = useGoogle(API_KEY);\n  const mapContainerRef = useRef(null);\n\n  const map = useMap({ google, mapContainerRef, initialConfig });\n  var place = location.state.place, origin = location.state.origin, destination = location.state.destination;\n  var places = usePlace({ google, map, place});\n  var direction = useDirection({ google, map, origin, destination, places })\n  return(\n    <>\n      <h2>Result</h2>\n      <p>{location.state.place}</p>\n      <p>{location.state.origin}</p>\n      <p>{location.state.destination}</p>\n      <Legs direction={direction} places={places}/>\n      <div ref={mapContainerRef} style={{height: \"100vh\"}}>I can use the DOM with react ref</div>\n    </>\n  )\n}\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}