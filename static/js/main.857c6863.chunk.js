(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{34:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(18),i=n.n(c),s=n(8),o=n.n(s),l=n(12),u=n(4),j=n(10),p=n(2),d=n(17),b=n(0);var f,O,h=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),a=n[0],c=n[1],i=Object(p.f)();return Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),i.push(e.path,{text:a})},children:[Object(b.jsx)("p",{children:a}),Object(b.jsx)("input",{type:"text",onChange:function(e){c(e.target.value)}}),Object(b.jsx)("input",{type:"submit"})]})},g=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(""),s=Object(u.a)(i,2),o=s[0],l=s[1],j=Object(p.f)();return Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),j.push(e.path,{place:e.place,origin:a,destination:o})},children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:["Origin: ",a]}),Object(b.jsx)("input",{type:"text",onChange:function(e){c(e.target.value)}})]}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:["Destination: ",o]}),Object(b.jsx)("input",{type:"text",onChange:function(e){l(e.target.value)}})]}),Object(b.jsx)("input",{type:"submit"})]})},x={zoom:12,center:{lat:35.6432027,lng:139.6729435}};function m(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:"Home"}),Object(b.jsx)(v,{path:"/plan"})]})}var v=function(e){var t=Object(r.useState)("\u5927\u962a"),n=Object(u.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)("\u5927\u962a\u99c5"),s=Object(u.a)(i,2),o=s[0],l=s[1],j=Object(r.useState)("\u8431\u5d8b\u99c5"),d=Object(u.a)(j,2),f=d[0],O=d[1],h=Object(p.f)();return Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),h.push(e.path,{region:a,origin:o,destination:f})},children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:["Region: ",a]}),Object(b.jsx)("input",{type:"text",onChange:function(e){c(e.target.value)}})]}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:["Origin: ",o]}),Object(b.jsx)("input",{type:"text",onChange:function(e){l(e.target.value)}})]}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:["Destination: ",f]}),Object(b.jsx)("input",{type:"text",onChange:function(e){O(e.target.value)}})]}),Object(b.jsx)("input",{type:"submit"})]})},y=function(e){if(null==e.plan||null==e.legs)return null;for(var t=e.plan,n=e.legs,r=[],a=0;a<t.length;a++){var c=Object(b.jsxs)("li",{children:[Object(b.jsxs)("p",{children:[t[a].arrivalTime.text,", ",t[a].name]}),Object(b.jsx)("p",{children:"stay time: 30min"}),a<n.length?Object(b.jsx)("p",{children:n[a].duration.text}):null]});r.push(c)}return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("ul",{children:r})})};function S(){var e=Object(r.useState)(null),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),i=Object(u.a)(c,2),s=i[0],j=i[1],h=Object(r.useRef)(null),g=Object(p.g)(),m=g.state.region,v=g.state.origin,S=g.state.destination;return Object(r.useEffect)(Object(l.a)(o.a.mark((function e(){var t,n,r,c,i,s,l,p,b,g,y,P,C,_,k;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new d.a({apiKey:"AIzaSyCkNip5D4glIDSddF__OlVzY1ovG5yVf7g",version:"weekly",libraries:["places"]}),e.next=3,t.load().then((function(e){return e}));case 3:return f=e.sent,O=new f.maps.Map(h.current,x),n=new f.maps.places.PlacesService(O),r={query:m,fields:["name","geometry"]},e.next=9,new Promise((function(e){n.findPlaceFromQuery(r,(function(t,n){n===f.maps.places.PlacesServiceStatus.OK&&e(t)}))}));case 9:return c=e.sent,r={location:new f.maps.LatLng(c[0].geometry.location.lat(),c[0].geometry.location.lng()),radius:"5000",query:"\u89b3\u5149"},e.next=13,new Promise((function(e){n.textSearch(r,(function(t,n){n==f.maps.places.PlacesServiceStatus.OK&&e(t)}))}));case 13:return i=e.sent,console.log(i),s=new f.maps.DirectionsService,l=(l=i.map((function(e){return{location:e.formatted_address,stopover:!0}}))).slice(0,5),e.next=20,s.route({origin:v,destination:S,waypoints:l,optimizeWaypoints:!0,travelMode:f.maps.TravelMode.DRIVING}).then((function(e){return e})).catch((function(e){return window.alert("Directions request failed due to "+e)}));case 20:return p=e.sent,console.log(p),b=p.routes[0].legs,g=w(p,i),console.log(b),console.log(g),e.next=28,D(g,b);case 28:for(y=e.sent,P=Object(u.a)(y,2),C=P[0],_=P[1],console.log(C),console.log(_),k=0;k<C.length;k++)new f.maps.Marker({position:{lat:C[k].geometry.location.lat(),lng:C[k].geometry.location.lng()},label:String(k),map:O});O.setCenter({lat:C[0].geometry.location.lat(),lng:C[0].geometry.location.lng()}),a(C),j(_);case 38:case"end":return e.stop()}}),e)}))),[]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(y,{plan:n,legs:s}),Object(b.jsx)("div",{ref:h,style:{height:"100vh"},children:"I can use the DOM with react ref"})]})}var w=function(e,t){var n=t.slice(0,5),r=e.routes[0].waypoint_order.map((function(e){return n[e]})),a={name:e.request.origin.query,geometry:{location:e.routes[0].legs[0].start_location}},c={name:e.request.destination.query,geometry:{location:e.routes[0].legs.slice(-1)[0].end_location}};return r.unshift(a),r.push(c),r},D=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var r,a,c,i,s,l,j,p,d,b,f,O,h,g,x;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=32400,a=[],c=[],i=!1,s=0;case 4:if(!(s<t.length)){e.next=34;break}if(a.push(t[s]),!((r+=l=3600)>=43200&&0==i)){e.next=30;break}return e.next=11,P("\u663c\u98df",t[s].geometry.location);case 11:return j=e.sent,p=Object(u.a)(j,1),d=p[0],console.log(d),e.next=17,C(t[s].formatted_address,d.formatted_address);case 17:return b=e.sent,f=b.routes[0].legs[0],e.next=21,C(d.formatted_address,t[s+1].formatted_address);case 21:O=e.sent,h=O.routes[0].legs[0],a.push(d),c.push(f),c.push(h),r+=f.duration.value+h.duration.value,i=!0,e.next=31;break;case 30:s<n.length&&(r+=n[s].duration.value,c.push(n[s]));case 31:s++,e.next=4;break;case 34:for(g=[],r=32400,s=0;s<a.length;s++)l=3600,x={name:a[s].name,formatted_address:a[s].formatted_address,geometry:a[s].geometry,arrivalTime:{text:_(r),value:r},stayingTime:l},g.push(x),s<c.length&&(r+=l+c[s].duration.value);return e.abrupt("return",[g,c]);case 38:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var r,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new f.maps.places.PlacesService(O),a={query:t,fields:["name","geometry","formatted_address"],locationBias:{lat:n.lat(),lng:n.lng()}},e.next=4,new Promise((function(e){r.findPlaceFromQuery(a,(function(t,n){n===f.maps.places.PlacesServiceStatus.OK&&e(t)}))}));case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new f.maps.DirectionsService,e.next=3,r.route({origin:t,destination:n,travelMode:f.maps.TravelMode.DRIVING}).then((function(e){return e})).catch((function(e){return console.log("Directions request failed due to "+e)}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function _(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60);return"".concat(("00"+t).slice(-2),":").concat(("00"+n).slice(-2))}function k(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:"Place"}),Object(b.jsx)(h,{path:"/origin-and-destination"})]})}function F(){var e=Object(p.g)();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:"OriginAndDestination"}),Object(b.jsx)("p",{children:e.state.text}),Object(b.jsx)(g,{path:"/result",place:e.state.text})]})}function M(){var e=Object(p.g)(),t=function(e){var t=Object(r.useState)(null),n=Object(u.a)(t,2),a=n[0],c=n[1],i=new d.a({apiKey:"AIzaSyCkNip5D4glIDSddF__OlVzY1ovG5yVf7g",version:"weekly",libraries:["places"]});return Object(r.useEffect)((function(){i.load().then((function(e){c(e)}))}),[]),a}(),n=Object(r.useRef)(null),a=function(e){var t=e.google,n=e.mapContainerRef,a=e.initialConfig,c=Object(r.useState)(null),i=Object(u.a)(c,2),s=i[0],o=i[1];return Object(r.useEffect)((function(){if(t&&n.current){var e=new t.maps.Map(n.current,a);o(e)}}),[t,n]),s}({google:t,mapContainerRef:n,initialConfig:x}),c=e.state.place,i=e.state.origin,s=e.state.destination,o=function(e){var t=e.google,n=e.map,a=e.place,c=Object(r.useState)(null),i=Object(u.a)(c,2),s=i[0],o=i[1];return Object(r.useEffect)((function(){if(t&&n){var e=new t.maps.places.PlacesService(n),r={query:a,fields:["name","geometry"]};e.findPlaceFromQuery(r,(function(n,r){if(r===t.maps.places.PlacesServiceStatus.OK){var a={location:new t.maps.LatLng(n[0].geometry.location.lat(),n[0].geometry.location.lng()),radius:"5000",query:"\u89b3\u5149"};e.textSearch(a,(function(e,n){n==t.maps.places.PlacesServiceStatus.OK&&(console.log(e),o(e))}))}}))}}),[t,n]),s}({google:t,map:a,place:c}),l=function(e){var t=e.google,n=e.map,a=e.origin,c=e.destination,i=e.places,s=Object(r.useState)(null),o=Object(u.a)(s,2),l=o[0],j=o[1];return Object(r.useEffect)((function(){if(t&&n&&i){var e=new t.maps.DirectionsService,r=new t.maps.DirectionsRenderer({suppressPolylines:!0});r.setMap(n);var s=i.map((function(e){return{location:e.formatted_address,stopover:!0}}));s=s.slice(0,5),e.route({origin:a,destination:c,waypoints:s,optimizeWaypoints:!0,travelMode:t.maps.TravelMode.DRIVING}).then((function(e){r.setDirections(e),console.log(e),j(e)})).catch((function(e){return window.alert("Directions request failed due to "+e)}))}}),[t,n,i]),l}({google:t,map:a,origin:i,destination:s,places:o});return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:"Result"}),Object(b.jsx)("p",{children:e.state.place}),Object(b.jsx)("p",{children:e.state.origin}),Object(b.jsx)("p",{children:e.state.destination}),Object(b.jsx)(y,{direction:l,places:o}),Object(b.jsx)("div",{ref:n,style:{height:"100vh"},children:"I can use the DOM with react ref"})]})}var I=function(){return Object(b.jsx)(j.a,{children:Object(b.jsxs)("div",{children:[Object(b.jsx)("nav",{children:Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:Object(b.jsx)(j.b,{to:"/",children:"Home"})}),Object(b.jsx)("li",{children:Object(b.jsx)(j.b,{to:"/place",children:"Place"})}),Object(b.jsx)("li",{children:Object(b.jsx)(j.b,{to:"/origin-and-destination",children:"OriginAndDestination"})}),Object(b.jsx)("li",{children:Object(b.jsx)(j.b,{to:"/plan",children:"Plan"})})]})}),Object(b.jsxs)(p.c,{children:[Object(b.jsx)(p.a,{path:"/place",children:Object(b.jsx)(k,{})}),Object(b.jsx)(p.a,{path:"/origin-and-destination",children:Object(b.jsx)(F,{})}),Object(b.jsx)(p.a,{path:"/result",children:Object(b.jsx)(M,{})}),Object(b.jsx)(p.a,{path:"/plan",children:Object(b.jsx)(S,{})}),Object(b.jsx)(p.a,{path:"/",children:Object(b.jsx)(m,{})})]})]})})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(I,{})}),document.getElementById("root")),q()}},[[34,1,2]]]);
//# sourceMappingURL=main.857c6863.chunk.js.map